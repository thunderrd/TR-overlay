-- ~/.xmonad/xmonad.hs


-- these are the utility modules to import
import XMonad

import Data.Monoid
import System.Exit
import qualified XMonad.StackSet as W
import qualified Data.Map        as M
import XMonad.Actions.SpawnOn           --for startupHook


-- the following 5 lines cribbed from the John Goerzen config
import XMonad.Hooks.DynamicLog
import XMonad.Hooks.ManageDocks
import XMonad.Util.Run(spawnPipe)
import XMonad.Util.EZConfig(additionalKeys)
import System.IO


-----------------------------------------------------------------
-----------------------------------------------------------------

-- which apps should have floating windows, (under construction)
myManageHook = composeAll
	[ className =? "Gimp" --> doFloat ]

-- defines workspace names
myWorkspaces = ["shell", "fah", "web", "irc", "files"] ++ map show [6..9]

-- where do I want to be after XMonad starts
startupWorkspace = "web"
-----------------------------------------------------------------
-----------------------------------------------------------------

main = do
    xmproc <- spawnPipe "xmobar"				     --starts xmobar, passes CL arg path to config file
    xmonad $ defaultConfig
        { 
	  workspaces         = myWorkspaces

        , terminal           = "urxvt"				     --specifies terminal program

	, borderWidth        = 1				     --width of window borders
        , normalBorderColor  = "#000000"			     --color of unfocused window border
        , focusedBorderColor = "#B87333"    --"#C76114"		     --color of focused window border

        , focusFollowsMouse = False

        , manageHook = manageHook defaultConfig
		   <+> manageDocks
		   <+> myManageHook
		   <+> manageSpawn

        , layoutHook = avoidStruts  $  layoutHook defaultConfig

        , logHook = dynamicLogWithPP xmobarPP                        --logHook uses hPutStrLn xmproc; pipes data to xmb
                        { ppOutput = hPutStrLn xmproc
                        , ppTitle = xmobarColor "#0EBFE9" "" . shorten 70  --70 characters of window title in xmb
                        }                                                  

----------------------------------------
-- startuphooks to start app on specific workspace automatically, 
-- now spawning on first workspace if XMonad is restarted (current space if mod-q) rather than the desired one, why?
	, startupHook = do 
		spawnOn "shell" "urxvt"
		spawnOn "fah" "urxvt"
		spawnOn "web" "firefox"
		spawnOn "irc" "hexchat"
		spawnOn "files" "thunar"
-----------------------------------------

        }

		`additionalKeys` myKeys                                         

------------------------------------------------------------------
------------------------------------------------------------------
-- Key bindings. Add, modify or remove key bindings here.

myKeys =

-- launch dmenu, version 4.4.1
    [
    ((mod1Mask,   xK_p), spawn "dmenu_run -nb '#535148' -nf 'burlywood' -fn '-*-Fixed-Bold-R-Normal-*-13-*-*-*-*-*-*-*' -sb 'burlywood' -sf 'black'")

-- take a full-screen screenshot
    , ((mod1Mask,   xK_Print     ), spawn "/usr/bin/screenshot scr")

-- [add other bindings here]

    ]
